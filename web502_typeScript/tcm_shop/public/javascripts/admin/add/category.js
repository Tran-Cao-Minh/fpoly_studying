(()=>{"use strict";var t,e=function(t){return function(e){console.log(t,e)}},n=function(t,e){console.log("Main Class: ",t,"Selected Property: ",e)},o=function(t,e,n){console.log("Main Class: ",t,"Selected Method: ",e,"Method Descriptor: ",n)},a=function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},i=function(){function t(t,e,n,o){this.selectElement=t,this.activeClass=e,this.selectOptionContainer=n,this.attributeList=o}return t.prototype.addOptionItem=function(t,e){void 0===e&&(e=[{key:String(),data:String()}]);var n=document.createElement("li");e.forEach((function(t){n.setAttribute(t.key,t.data)})),n.innerText=t,this.selectOptionContainer.appendChild(n)},t.prototype.createLabelPointer=function(t){var e=this;t.addEventListener("click",(function(){e.selectElement.focus()}))},t.prototype.createCustomSelect=function(t,e,n){var o=this;this.selectElement.setAttribute("tabindex","0");var a,i,r=function(t){t?o.selectElement.classList.add(o.activeClass):o.selectElement.classList.remove(o.activeClass)},c=function(t){s.forEach((function(t){t.removeAttribute(n)})),t.setAttribute(n,"")},s=this.selectElement.querySelectorAll("li"),u=0;o.selectElement.addEventListener("focus",(function(){r(!0),c(s[u])})),o.selectElement.addEventListener("focusout",(function(){r(!1)})),o.selectElement.addEventListener("mouseenter",(function(){r(!0),c(s[u])})),o.selectElement.addEventListener("mouseleave",(function(){r(!1)})),o.selectElement.addEventListener("click",(function(){r(a),a=!0})),o.selectElement.addEventListener("keydown",(function(t){"ArrowDown"===t.key?(u<s.length-1?u++:u=0,c(s[u])):"ArrowUp"===t.key?(u>0?u--:u=s.length-1,c(s[u])):"Enter"===t.key&&(o.selectElement.classList.contains(o.activeClass)?s[u].click():r(!0))})),i=function(t){o.attributeList.forEach((function(e){o.selectElement.setAttribute(e,t.getAttribute(e))})),e.innerHTML=t.innerHTML,a=!1},s.forEach((function(e,n){e.getAttribute("value")===t&&(i(e),a=!0,u=n,c(e)),e.addEventListener("click",(function(){i(e),u=n,c(e),r(!1)})),e.addEventListener("mouseenter",(function(){c(e)}))}))},a([n],t.prototype,"selectElement",void 0),a([n],t.prototype,"activeClass",void 0),a([n],t.prototype,"selectOptionContainer",void 0),a([n],t.prototype,"attributeList",void 0),a([o],t.prototype,"addOptionItem",null),a([o],t.prototype,"createLabelPointer",null),a([o],t.prototype,"createCustomSelect",null),a([e("Custom Select Creator")],t)}(),r=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),c=function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},s=function(t,e){this.fetchLink=t,this.fetchMethod=e},u=function(t){function n(e){return t.call(this,"".concat(e,".json"),"GET")||this}return r(n,t),n.prototype.readData=function(t){fetch(this.fetchLink,{method:this.fetchMethod}).then((function(t){if(!t.ok)throw new Error("Error = "+t.status);return t.json()})).then((function(e){t(e)})).catch((function(t){console.log("error: "+t)}))},c([o],n.prototype,"readData",null),c([e("Data Reader")],n)}(s),l=(function(t){function n(e){return t.call(this,e,"DELETE")||this}r(n,t),n.prototype.deleteData=function(t,e){var n="".concat(this.fetchLink,"/").concat(t,".json");fetch(n,{method:this.fetchMethod}).then((function(t){if(!t.ok)throw new Error("error = "+t.status);return t.json()})).then((function(t){e(t)})).catch((function(t){console.log("error: "+t)}))},c([o],n.prototype,"deleteData",null),n=c([e("Data Deleter")],n)}(s),function(t){function n(e){return t.call(this,e,"POST")||this}return r(n,t),n.prototype.addData=function(t,e,n){fetch("".concat(this.fetchLink,".json"),{method:this.fetchMethod,body:t}).then((function(t){if(!t.ok)throw n(),new Error("error = "+t.status);return t.json()})).then((function(){e()})).catch((function(t){console.log("error: "+t)}))},c([o],n.prototype,"addData",null),c([e("Data Adder")],n)}(s)),d=(function(t){function n(e){return t.call(this,e,"PUT")||this}r(n,t),n.prototype.updateData=function(t,e,n,o){fetch("".concat(this.fetchLink+t,".json"),{method:this.fetchMethod,body:JSON.stringify(e)}).then((function(t){if(!t.ok)throw o(),new Error("error = "+t.status);return t.json()})).then((function(){n()})).catch((function(t){console.log("error: "+t)}))},c([o],n.prototype,"updateData",null),n=c([e("Data Updater")],n)}(s),function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r}),h=function(){function t(t,e,n,o){this.submitButton=t,this.hideMessageContainerClass=e,this.inputInvalidClass=n,this.inputValidClass=o,this.inputList=[],this.checkValidate=!1}return t.prototype.changeInputStatus=function(t,e,n){!0===n?(e.classList.add(this.hideMessageContainerClass),t.classList.remove(this.inputInvalidClass),t.classList.add(this.inputValidClass)):!1===n&&(e.classList.remove(this.hideMessageContainerClass),t.classList.remove(this.inputValidClass),t.classList.add(this.inputInvalidClass))},t.prototype.changeButtonStatus=function(){var t=this;this.checkValidate=!0,this.inputList.forEach((function(e){!1===e.classList.contains(t.inputValidClass)&&(t.checkValidate=!1)})),!0===this.checkValidate?this.submitButton.removeAttribute("disabled"):this.submitButton.setAttribute("disabled","")},t.prototype.addTextInputValidator=function(t,e,n,o,a,i,r){var c=this;this.inputList.push(t),t.addEventListener("change",(function(){t.value=t.value.trim();var s=t.value,u=!1;s.length<o?(n.innerHTML="The ".concat(e," must have more than ").concat(o," "),n.innerHTML+=1===o?"character":"characters"):s.length>a?(n.innerHTML="The ".concat(e," must have less than ").concat(a," "),n.innerHTML+=1===a?"character":"characters"):!1===i.test(s)?n.innerHTML=r:u=!0,c.changeInputStatus(t,n,u),c.changeButtonStatus()}))},t.prototype.addNumberInputValidator=function(t,e,n,o,a,i){var r=this;this.inputList.push(t),t.addEventListener("input",(function(){var c=Number(t.value),s=!1;isNaN(c)||""===t.value?n.innerHTML="The ".concat(e," must be a number"):c<o?n.innerHTML="The ".concat(e," must greater than ").concat(o):c>a?n.innerHTML="The ".concat(e," must lesser than ").concat(a):c/i%1!=0?n.innerHTML="The ".concat(e," step must be ").concat(i):s=!0,r.changeInputStatus(t,n,s),r.changeButtonStatus()}))},t.prototype.addFileInputValidator=function(t,e,n,o,a,i){var r=this;this.inputList.push(t);var c=1048576;t.addEventListener("change",(function(s){var u=!1,l=s.target.files[0],d=l.type,h=!1;if(o.forEach((function(t){d===t&&(h=!0)})),!1===h){var p="The ".concat(e," file extension must be a value in the list:");o.forEach((function(t){p+=" ".concat(t.split("/").pop().toUpperCase(),",")})),n.innerHTML=p.slice(0,-2)}else l.size<a*c?n.innerHTML="The ".concat(e," file size must greater than ").concat(a," MB"):l.size>i*c?n.innerHTML="The ".concat(e," file size must lesser than ").concat(i," MB"):u=!0;r.changeInputStatus(t,n,u),r.changeButtonStatus()}))},t.prototype.addDateInputValidator=function(t,e,n,o,a){var i=this;void 0===o&&(o={day:Number(),month:Number(),year:Number()}),void 0===a&&(a={day:Number(),month:Number(),year:Number()}),this.inputList.push(t);var r=new Date(o.year,o.month-1,o.day).getTime(),c=new Date(a.year,a.month-1,a.day).getTime(),s=function(){var s=t.value,u=!1;if(""===s)n.innerHTML="The ".concat(e," must be a valid date");else{var l=s.split(/\D/),d=Number(l[0]),h=Number(l[1])-1,p=Number(l[2]),f=new Date(d,h,p).getTime();if(f<r||d<100&&o.year>=100){var y="".concat(o.day,"/").concat(o.month,"/").concat(o.year);n.innerHTML="The ".concat(e," must greater than ").concat(y)}else if(f>c){var v="".concat(a.day,"/").concat(a.month,"/").concat(a.year);n.innerHTML="The ".concat(e," must lesser than ").concat(v)}else u=!0}i.changeInputStatus(t,n,u),i.changeButtonStatus()};t.addEventListener("blur",s),t.addEventListener("keypress",(function(t){"Enter"===t.key&&s()}))},t.prototype.addRetypeInputValidator=function(t,e,n,o,a){var i=this;this.inputList.push(n);var r,c=!1,s=function(){!1==(r=n.value===t.value)&&(a.innerHTML="The ".concat(o," must be like the ").concat(e)),i.changeInputStatus(n,a,r),i.changeButtonStatus()};t.addEventListener("change",(function(){!0===c&&s()})),n.addEventListener("change",(function(){c=!0,s()}))},t.prototype.checkDuplicateValidator=function(t,e,n,o,a,i,r){var c=this;void 0===a&&(a=Boolean()),void 0===i&&(i=Boolean()),void 0===r&&(r=Boolean()),t.setAttribute("data-duplicate",JSON.stringify(o));var s=function(o){var r,s=JSON.parse(t.dataset.duplicate);!0===i&&(o=o.toLowerCase(),s.forEach((function(t,e,n){n[e]=t.toLowerCase()}))),!0===a?(r=!1,s.forEach((function(t){o===t&&(r=!0)}))):!1===a&&(r=!0,s.forEach((function(t){o===t&&(r=!1)}))),!1===r&&!1===a?n.innerHTML="The ".concat(e," is exist"):!1===r&&!0===a&&(n.innerHTML="The ".concat(e," is not exist")),c.changeInputStatus(t,n,r),c.changeButtonStatus()};!1===r?(this.inputList.push(t),t.addEventListener("change",(function(){s(t.value)}))):t.addEventListener("change",(function(){t.classList.contains(c.inputValidClass)&&s(t.value)}))},t.prototype.changeDuplicateValue=function(t,e,n){var o=JSON.parse(t.dataset.duplicate);!0===n?o.push(e):o.splice(o.indexOf(e),1),t.setAttribute("data-duplicate",JSON.stringify(o))},t.prototype.createSubmitButtonEvent=function(t,e){var n=this;!0===e?this.submitButton.setAttribute("disabled","true"):(this.checkValidate=!0,this.inputList.forEach((function(t){t.classList.add(n.inputValidClass)}))),this.submitButton.addEventListener("click",(function(e){e.preventDefault(),!0===n.checkValidate&&t()}))},t.prototype.resetForm=function(t){var e=this;t.reset(),this.inputList.forEach((function(t){t.classList.remove(e.inputValidClass)})),this.changeButtonStatus()},d([n],t.prototype,"submitButton",void 0),d([n],t.prototype,"hideMessageContainerClass",void 0),d([n],t.prototype,"inputInvalidClass",void 0),d([n],t.prototype,"inputValidClass",void 0),d([n],t.prototype,"inputList",void 0),d([n],t.prototype,"checkValidate",void 0),d([o],t.prototype,"changeInputStatus",null),d([o],t.prototype,"changeButtonStatus",null),d([o],t.prototype,"addTextInputValidator",null),d([o],t.prototype,"addNumberInputValidator",null),d([o],t.prototype,"addFileInputValidator",null),d([o],t.prototype,"addDateInputValidator",null),d([o],t.prototype,"addRetypeInputValidator",null),d([o],t.prototype,"checkDuplicateValidator",null),d([o],t.prototype,"changeDuplicateValue",null),d([o],t.prototype,"createSubmitButtonEvent",null),d([o],t.prototype,"resetForm",null),d([e("Form Validator")],t)}(),p=function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},f=new(function(){function t(t,e,n,o){this.verticalAlign=t,this.verticalOffset=e,this.horizontalAlign=n,this.horizontalOffset=o}return t.prototype.createToast=function(t,e,n){var o,a=this,i=document.body,r="toast-".concat(t);switch(t){case"success":o='<i class="fa-solid fa-check"></i>';break;case"danger":o='<i class="fa-solid fa-xmark"></i>';break;case"warning":o='<i class="fa-solid fa-exclamation"></i>';break;case"info":o='<i class="fa-solid fa-question"></i>'}var c=document.createElement("div");c.setAttribute("class","toast ".concat(r," js-toastify")),c.innerHTML='\n      <div class="toast-icon">\n        '.concat(o,'\n      </div>\n      <div class="toast-message">\n        ').concat(e,'\n      </div>\n      <div class="toast-close">\n        <i class="fa-solid fa-xmark"></i>\n      </div>\n    ');var s=document.querySelectorAll(".js-toastify"),u=this.verticalOffset;s.length>0&&s.forEach((function(t){u+=a.verticalOffset+t.offsetHeight})),c.setAttribute("style","\n      ".concat(this.horizontalAlign,": ").concat(this.horizontalOffset,"px;\n      ").concat(this.verticalAlign,": ").concat(u,"px;\n    ")),i.appendChild(c);var l=function(){c.style[a.horizontalAlign]="-".concat(c.offsetWidth,"px"),c.style.opacity="0.2",setTimeout((function(){for(var t=c.nextElementSibling;t;){var e=Number(t.style[a.verticalAlign].slice(0,-2));t.style[a.verticalAlign]="".concat(e-c.offsetHeight-a.verticalOffset,"px"),t=t.nextElementSibling}i.removeChild(c)}),200)},d=setTimeout((function(){l()}),1e3*n);c.querySelector(".toast-close").addEventListener("click",(function(){clearTimeout(d),l()}))},p([n],t.prototype,"verticalAlign",void 0),p([n],t.prototype,"verticalOffset",void 0),p([n],t.prototype,"horizontalAlign",void 0),p([n],t.prototype,"horizontalOffset",void 0),p([o],t.prototype,"createToast",null),p([e("Toast Creator")],t)}())("bottom",16,"right",16),y="https://tcm-shop-default-rtdb.firebaseio.com/categories",v={form:document.querySelector("#addCategoryForm"),categoryName:document.querySelector("#categoryName"),categoryOrder:document.querySelector("#categoryOrder"),categoryDisplay:document.querySelector("#categoryDisplay"),submitButton:document.querySelector("#js-add-data-submit")};window.addEventListener("load",(function(){var t,e,n,o;!function(){var t=document.querySelector("#categoryDisplay"),e=t.querySelector(".custom-select-list"),n=t.querySelector(".custom-select-text"),o=document.querySelectorAll("[for=categoryDisplay]"),a=new i(t,"active",e,["value"]);o.forEach((function(t){a.createLabelPointer(t)}));var r=["Show","Hide"];r.forEach((function(t){a.addOptionItem(t,[{key:"value",data:t}])})),a.createCustomSelect(r[0],n,"choosen")}(),o=new h(v.submitButton,"d-none","is-invalid","is-valid"),t=v.categoryName.parentElement.parentElement.querySelector(".invalid-feedback"),o.addTextInputValidator(v.categoryName,"category name",t,4,200,/^([A-Za-z0-9]{1})([\w\s'":,.&+|-]{0,199})$/,"Category name must be start with alphanumeric and \n      contains only alphanumeric, underscore or some specials \n      characters include , ' \" : - ; _ + . |"),new u(y).readData((function(e){var n=function(){var t=[];return Object.keys(e).map((function(n){t.push(e[n].CategoryName)})),t}();o.checkDuplicateValidator(v.categoryName,"category name",t,n,!1,!1,!0)})),e=v.categoryOrder.parentElement.parentElement.querySelector(".invalid-feedback"),o.addNumberInputValidator(v.categoryOrder,"category order",e,1,99,1),n=new l(y),o.createSubmitButtonEvent((function(){var t=JSON.stringify({CategoryName:v.categoryName.value,CategoryOrder:Number(v.categoryOrder.value),CategoryDisplay:v.categoryDisplay.getAttribute("value"),CategoryProductQuantity:0});n.addData(t,(function(){f.createToast("success","Add category completed \n Category name: ".concat(v.categoryName.value),2),o.changeDuplicateValue(v.categoryName,v.categoryName.value,!0),o.resetForm(v.form)}),(function(){f.createToast("danger","Add category failed",2)}))}),!0)}))})();