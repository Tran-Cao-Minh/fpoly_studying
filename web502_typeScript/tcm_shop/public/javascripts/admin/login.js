(()=>{"use strict";var t,e,n,a,o=function(t){return function(e){console.log(t,e)}},r=function(t,e){console.log("Main Class: ",t,"Selected Property: ",e)},i=function(t,e,n){console.log("Main Class: ",t,"Selected Method: ",e,"Method Descriptor: ",n)},s=function(t,e,n,a){var o,r=arguments.length,i=r<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},c=function(){function t(t,e,n,a){this.submitButton=t,this.hideMessageContainerClass=e,this.inputInvalidClass=n,this.inputValidClass=a,this.inputList=[],this.checkValidate=!1}return t.prototype.changeInputStatus=function(t,e,n){!0===n?(e.classList.add(this.hideMessageContainerClass),t.classList.remove(this.inputInvalidClass),t.classList.add(this.inputValidClass)):!1===n&&(e.classList.remove(this.hideMessageContainerClass),t.classList.remove(this.inputValidClass),t.classList.add(this.inputInvalidClass))},t.prototype.changeButtonStatus=function(){var t=this;this.checkValidate=!0,this.inputList.forEach((function(e){!1===e.classList.contains(t.inputValidClass)&&(t.checkValidate=!1)})),!0===this.checkValidate?this.submitButton.removeAttribute("disabled"):this.submitButton.setAttribute("disabled","")},t.prototype.addTextInputValidator=function(t,e,n,a,o,r,i){var s=this;this.inputList.push(t),t.addEventListener("change",(function(){t.value=t.value.trim();var c=t.value,u=!1;c.length<a?(n.innerHTML="The ".concat(e," must have more than ").concat(a," "),n.innerHTML+=1===a?"character":"characters"):c.length>o?(n.innerHTML="The ".concat(e," must have less than ").concat(o," "),n.innerHTML+=1===o?"character":"characters"):!1===r.test(c)?n.innerHTML=i:u=!0,s.changeInputStatus(t,n,u),s.changeButtonStatus()}))},t.prototype.addNumberInputValidator=function(t,e,n,a,o,r){var i=this;this.inputList.push(t),t.addEventListener("input",(function(){var s=Number(t.value),c=!1;isNaN(s)||""===t.value?n.innerHTML="The ".concat(e," must be a number"):s<a?n.innerHTML="The ".concat(e," must greater than ").concat(a):s>o?n.innerHTML="The ".concat(e," must lesser than ").concat(o):s/r%1!=0?n.innerHTML="The ".concat(e," step must be ").concat(r):c=!0,i.changeInputStatus(t,n,c),i.changeButtonStatus()}))},t.prototype.addFileInputValidator=function(t,e,n,a,o,r){var i=this;this.inputList.push(t);var s=1048576;t.addEventListener("change",(function(c){var u=!1,l=c.target.files[0],h=l.type,d=!1;if(a.forEach((function(t){h===t&&(d=!0)})),!1===d){var p="The ".concat(e," file extension must be a value in the list:");a.forEach((function(t){p+=" ".concat(t.split("/").pop().toUpperCase(),",")})),n.innerHTML=p.slice(0,-2)}else l.size<o*s?n.innerHTML="The ".concat(e," file size must greater than ").concat(o," MB"):l.size>r*s?n.innerHTML="The ".concat(e," file size must lesser than ").concat(r," MB"):u=!0;i.changeInputStatus(t,n,u),i.changeButtonStatus()}))},t.prototype.addDateInputValidator=function(t,e,n,a,o){var r=this;void 0===a&&(a={day:Number(),month:Number(),year:Number()}),void 0===o&&(o={day:Number(),month:Number(),year:Number()}),this.inputList.push(t);var i=new Date(a.year,a.month-1,a.day).getTime(),s=new Date(o.year,o.month-1,o.day).getTime(),c=function(){var c=t.value,u=!1;if(""===c)n.innerHTML="The ".concat(e," must be a valid date");else{var l=c.split(/\D/),h=Number(l[0]),d=Number(l[1])-1,p=Number(l[2]),f=new Date(h,d,p).getTime();if(f<i||h<100&&a.year>=100){var m="".concat(a.day,"/").concat(a.month,"/").concat(a.year);n.innerHTML="The ".concat(e," must greater than ").concat(m)}else if(f>s){var v="".concat(o.day,"/").concat(o.month,"/").concat(o.year);n.innerHTML="The ".concat(e," must lesser than ").concat(v)}else u=!0}r.changeInputStatus(t,n,u),r.changeButtonStatus()};t.addEventListener("blur",c),t.addEventListener("keypress",(function(t){"Enter"===t.key&&c()}))},t.prototype.addRetypeInputValidator=function(t,e,n,a,o){var r=this;this.inputList.push(n);var i,s=!1,c=function(){!1==(i=n.value===t.value)&&(o.innerHTML="The ".concat(a," must be like the ").concat(e)),r.changeInputStatus(n,o,i),r.changeButtonStatus()};t.addEventListener("change",(function(){!0===s&&c()})),n.addEventListener("change",(function(){s=!0,c()}))},t.prototype.checkDuplicateValidator=function(t,e,n,a,o,r,i){var s=this;void 0===o&&(o=Boolean()),void 0===r&&(r=Boolean()),void 0===i&&(i=Boolean()),t.setAttribute("data-duplicate",JSON.stringify(a));var c=function(a){var i,c=JSON.parse(t.dataset.duplicate);!0===r&&(a=a.toLowerCase(),c.forEach((function(t,e,n){n[e]=t.toLowerCase()}))),!0===o?(i=!1,c.forEach((function(t){a===t&&(i=!0)}))):!1===o&&(i=!0,c.forEach((function(t){a===t&&(i=!1)}))),!1===i&&!1===o?n.innerHTML="The ".concat(e," is exist"):!1===i&&!0===o&&(n.innerHTML="The ".concat(e," is not exist")),s.changeInputStatus(t,n,i),s.changeButtonStatus()};!1===i?(this.inputList.push(t),t.addEventListener("change",(function(){c(t.value)}))):t.addEventListener("change",(function(){t.classList.contains(s.inputValidClass)&&c(t.value)}))},t.prototype.changeDuplicateValue=function(t,e,n){var a=JSON.parse(t.dataset.duplicate);!0===n?a.push(e):a.splice(a.indexOf(e),1),t.setAttribute("data-duplicate",JSON.stringify(a))},t.prototype.createSubmitButtonEvent=function(t,e){var n=this;!0===e?this.submitButton.setAttribute("disabled","true"):(this.checkValidate=!0,this.inputList.forEach((function(t){t.classList.add(n.inputValidClass)}))),this.submitButton.addEventListener("click",(function(e){e.preventDefault(),!0===n.checkValidate&&t()}))},t.prototype.resetForm=function(t){var e=this;t.reset(),this.inputList.forEach((function(t){t.classList.remove(e.inputValidClass)})),this.changeButtonStatus()},s([r],t.prototype,"submitButton",void 0),s([r],t.prototype,"hideMessageContainerClass",void 0),s([r],t.prototype,"inputInvalidClass",void 0),s([r],t.prototype,"inputValidClass",void 0),s([r],t.prototype,"inputList",void 0),s([r],t.prototype,"checkValidate",void 0),s([i],t.prototype,"changeInputStatus",null),s([i],t.prototype,"changeButtonStatus",null),s([i],t.prototype,"addTextInputValidator",null),s([i],t.prototype,"addNumberInputValidator",null),s([i],t.prototype,"addFileInputValidator",null),s([i],t.prototype,"addDateInputValidator",null),s([i],t.prototype,"addRetypeInputValidator",null),s([i],t.prototype,"checkDuplicateValidator",null),s([i],t.prototype,"changeDuplicateValue",null),s([i],t.prototype,"createSubmitButtonEvent",null),s([i],t.prototype,"resetForm",null),s([o("Form Validator")],t)}(),u=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}),l=function(t,e,n,a){var o,r=arguments.length,i=r<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},h=function(t,e){this.fetchLink=t,this.fetchMethod=e},d=function(t){function e(e){return t.call(this,"".concat(e,".json"),"GET")||this}return u(e,t),e.prototype.readData=function(t){fetch(this.fetchLink,{method:this.fetchMethod}).then((function(t){if(!t.ok)throw new Error("Error = "+t.status);return t.json()})).then((function(e){t(e)})).catch((function(t){console.log("error: "+t)}))},l([i],e.prototype,"readData",null),l([o("Data Reader")],e)}(h),p=(function(t){function e(e){return t.call(this,e,"DELETE")||this}u(e,t),e.prototype.deleteData=function(t,e){var n="".concat(this.fetchLink,"/").concat(t,".json");fetch(n,{method:this.fetchMethod}).then((function(t){if(!t.ok)throw new Error("error = "+t.status);return t.json()})).then((function(t){e(t)})).catch((function(t){console.log("error: "+t)}))},l([i],e.prototype,"deleteData",null),e=l([o("Data Deleter")],e)}(h),function(t){function e(e){return t.call(this,e,"POST")||this}u(e,t),e.prototype.addData=function(t,e,n){fetch("".concat(this.fetchLink,".json"),{method:this.fetchMethod,body:t}).then((function(t){if(!t.ok)throw n(),new Error("error = "+t.status);return t.json()})).then((function(){e()})).catch((function(t){console.log("error: "+t)}))},l([i],e.prototype,"addData",null),e=l([o("Data Adder")],e)}(h),function(t){function e(e){return t.call(this,e,"PUT")||this}u(e,t),e.prototype.updateData=function(t,e,n,a){fetch("".concat(this.fetchLink+t,".json"),{method:this.fetchMethod,body:JSON.stringify(e)}).then((function(t){if(!t.ok)throw a(),new Error("error = "+t.status);return t.json()})).then((function(){n()})).catch((function(t){console.log("error: "+t)}))},l([i],e.prototype,"updateData",null),e=l([o("Data Updater")],e)}(h),{form:document.querySelector("#loginForm"),userName:document.querySelector("#userName"),userPassword:document.querySelector("#userPassword"),submitButton:document.querySelector("#submitLogin")}),f=new c(p.submitButton,"d-none","is-invalid","is-valid");e=p.userName.parentElement.parentElement.querySelector(".invalid-feedback"),f.addTextInputValidator(p.userName,"user name",e,4,200,/^([A-Za-z0-9]{1})([\w\s'":,.&+|-]{0,199})$/,"Category name must be start with alphanumeric and \n    contains only alphanumeric, underscore or some specials \n    characters include , ' \" : - ; _ + . |"),n=p.userPassword.parentElement.parentElement.querySelector(".invalid-feedback"),f.addTextInputValidator(p.userPassword,"user password",n,4,200,/^([A-Za-z0-9]{1})([\w\s'":,.&+|-]{0,199})$/,"Category name must be start with alphanumeric and \n    contains only alphanumeric, underscore or some specials \n    characters include , ' \" : - ; _ + . |"),a=new d("https://tcm-shop-default-rtdb.firebaseio.com/users"),f.createSubmitButtonEvent((function(){var t=p.userName.value,e=p.userPassword.value,n=document.querySelector("#js-login-notification");a.readData((function(a){var o;void 0===a&&(a=Object()),function(t){t.ADMIN="Admin"}(o||(o={})),Object.keys(a).map((function(n){a[n].UserName===t&&a[n].UserPassword===e&&a[n].UserRole===o.ADMIN&&(sessionStorage.setItem("userName",t),sessionStorage.setItem("userPassword",e),location.href="/admin/order-overview")})),n.classList.remove("d-none"),n.innerText="Your User Name or Password WRONG ~"}))}),!0)})();