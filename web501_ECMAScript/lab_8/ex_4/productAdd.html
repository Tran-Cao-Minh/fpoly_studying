<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4 access data in Firebase</title>
  <!-- bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
  <div class="container-fluid bg-dark py-5">
    <form id="addProductForm"
      class="bg-light col-12 col-sm-11 col-md-9 col-lg-8 col-xl-7 col-xxl-6 rounded-2 pt-4 px-3 pb-3 m-auto">
      <h4 class="text-center text-uppercase mb-3">
        Add Product
      </h4>
      <div class="form-group mb-3">
        <label class="mb-1" for="productID">ID</label>
        <input required type="number" class="form-control" id="productID" name="id">
      </div>
      <div class="form-group mb-3">
        <label class="mb-1" for="productName">Name</label>
        <input required type="text" class="form-control" id="productName" name="productName">
      </div>
      <div class="form-group mb-3">
        <label class="mb-1" for="productPrice">Price</label>
        <input required type="number" class="form-control" id="productPrice" name="price">
      </div>
      <div class="form-group mb-3">
        <label class="mb-1" for="productDescription">Description</label>
        <textarea required class="form-control" name="productDescription" id="description" cols="30" rows="10"></textarea>
      </div>
      <div class="form-group mt-4">
        <button class="btn btn-success py-2 px-4 w-100 text-uppercase">
          save
        </button>
      </div>
    </form>
  </div>
  <script>
    const url = 'https://fir-firebase-minhtc-ps18817-default-rtdb.firebaseio.com/products.json';
    const form = document.querySelector('#addProductForm');

    form.addEventListener('submit', async function addData (event) {
      event.preventDefault();

      const formData = JSON.stringify({
        'id': Number(form.id.value),
        'productName': form.productName.value,
        'price': form.price.value,
        'description': form.description.value
      });

      const response = await fetch(url, {
        method: 'POST',
        body: formData
      });

      if (response.status === 200) {
        console.log('Add data completed');
        location.href = './productList.html';

      } else {
        console.log(`Add data failed - Error: ${response.status}`);
      };
    });
  </script>
</body>

</html>